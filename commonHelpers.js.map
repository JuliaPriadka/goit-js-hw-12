{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport let perPage = 15;\n\nexport async function getImages(paramsToSearch, page = 1) {\n\n    const searchedImages = await axios(`https://pixabay.com/api/`, {\n        params: {\n            key: '43250270-1f98e5ae52bb69b689c51c131',\n            q: paramsToSearch,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page: perPage,\n        }\n    });\n\n    return searchedImages.data;\n}","\nexport function createMarkup(arr) {\n    return arr\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) =>\n                `<li class=\"card\">\n        <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"card-img\">\n        </a>\n        <ul class=\"card-stats\">\n          <li>\n            <h3 class=\"card-stats-name\">Likes</h3>\n            <p class=\"card-stats-info\">${likes}</p>\n          </li>\n          <li>\n            <h3 class=\"card-stats-name\">Views</h3>\n            <p class=\"card-stats-info\">${views}</p>\n          </li>\n          <li>\n            <h3 class=\"card-stats-name\">Comments</h3>\n            <p class=\"card-stats-info\">${comments}</p>\n          </li>\n          <li>\n            <h3 class=\"card-stats-name\">Downloads</h3>\n            <p class=\"card-stats-info\">${downloads}</p>\n          </li>\n        </ul>\n      </li>`\n        )\n        .join('');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImages } from './js/pixabay-api.js';\nimport { createMarkup } from './js/render-functions.js';\n\nimport { perPage } from './js/pixabay-api.js';\n\nlet page = 1;\nlet userSearch;\nlet totalPages;\n\nconst lightbox = new SimpleLightbox('.card a', {\n  captionsData: 'alt',\n});\n\nconst form = document.querySelector('.form');\nconst container = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  loader.style.display = 'none';\n  loadMoreBtn.style.display = 'none';\n  container.innerHTML = '';\n\n  userSearch = event.target.elements.input.value.trim();\n\n  if (userSearch.length === 0) {\n    loader.style.display = 'flex';\n    iziToast.show({\n      message: 'Please, fill in the \"Search\" params',\n      backgroundColor: '#ef4040',\n      messageColor: '#fff',\n      position: 'bottomCenter',\n    });\n    return;\n  }\n\n  try {\n    const response = await getImages(userSearch, page);\n\n    if (response.hits.length === 0) {\n      loader.style.display = 'flex';\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: ' #ffa000',\n        messageColor: '#fff',\n        position: 'bottomCenter',\n      });\n      form.reset();\n      return;\n    }\n\n    container.insertAdjacentHTML('beforeend', createMarkup(response.hits));\n    loadMoreBtn.style.display = 'flex';\n\n    const card = document.querySelector('.card');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy(0, cardHeight * 2);\n\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.show({\n      message: `${error}`,\n      backgroundColor: ' #ffa000',\n      messageColor: '#fff',\n      position: 'bottomCenter',\n    });\n  }\n  form.reset();\n}\n\nasync function onLoadMoreBtnClick() {\n  page += 1;\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'flex';\n\n  try {\n    const moreImages = await getImages(userSearch, page);\n    container.insertAdjacentHTML('beforeend', createMarkup(moreImages.hits));\n\n    const card = document.querySelector('.card');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy(0, cardHeight * 2);\n\n    loader.style.display = 'none';\n    loadMoreBtn.style.display = 'flex';\n    lightbox.refresh();\n    totalPages = Math.ceil(moreImages.totalHits / perPage);\n\n    if (page >= totalPages) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: ' #ffa000',\n        messageColor: '#fff',\n        position: 'bottomCenter',\n      });\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `${error}`,\n      backgroundColor: ' #ffa000',\n      messageColor: '#fff',\n      position: 'bottomCenter',\n    });\n  }\n}\n"],"names":["perPage","getImages","paramsToSearch","page","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","userSearch","totalPages","lightbox","SimpleLightbox","form","container","loader","loadMoreBtn","onFormSubmit","onLoadMoreBtnClick","event","iziToast","response","cardHeight","error","moreImages"],"mappings":"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"}